# Chapter8_ 제어장치 ControllUnit

8.1 제어장치 기능
---
처리장치  
* 프로그래머 모델에 해당하며, 데이터를 처리한다.
제어장치  
* 처리장치가 동작할 수 있도록 제어신호를 제공한다.

* * 프로그램의 실행* * 
순서 제어  
* 명령어 사이클의 각 단계를 진행시킨다.
동작 제어  
* 각 단계에서 필요로 하는 제어 신호를 생성한다

* * 제어장치 기능* * 
명령어 레지스터  
* 동작코드를 해독하여 현재 실행하고 있는 명령어를 구별한다.
상태 레지스터  
* 조건 판단을 위해 조건 플래그를 사용한다.
클럭 발생기  
* 타이밍 신호를 생성한다


8.2 제어장치 종류
---
### 8.2.1 조합논리회로 구현
논리회로 구현: 진가표 → 논리식 → 논리회로도  
 
기억장치 구현  
* 진가표의 입력은 기억장치 주소로 사용
* 진가표의 출력은 기억장치 데이터

### 8.2.2 순차논리회로 구현
기억장치 구현  
* 기억장치 주소를 상태로 보고, 상태의 출력을 데이터로 기록한다.
* 출력을 피드백하여 기억장치 주소로 공급한다.

논리회로 구현  
* 상태도 → 상태표 → 상태 논리식, 출력 논리식 → 논리회로도

기억장치 구현  
* 기억장치 주소: 현재상태에 해당한다.
* 기억장치 데이터: 다음상태와 출력을 저장한다.
* 다음상태 부분을 피드백해서 기억장치 주소로 사용한다

8.3 하드와이어드 제어장치
---
타이밍 신호 발생기: 명령어 사이클 구분  
명령어 디코더: 동작코드를 해석하여 현재 실행 중인 명령어 구분  
제어신호 발생기: 제어신호 생성  

### 8.3.1 타이밍 신호 발생기
타이밍 신호 발생기의 출력
* 명령어 사이클 코드(ICC)
* 현재 진행 중인 명령어 사이클 단계를 구별한다.
* 상태머신으로 구현한다.
* 시퀀스 카운터(SCNT)
* 명령어 사이클 단계에서 클럭의 순서를 구별한다.
* 카운터로 구현한다.

### 8.3.2 명령어 디코더  
명령어를 디코드하여 명령어를 구분한다.  

### 8.3.3 제어신호 발생기
제어장치 구성요소 역할  
* 타이밍 신호 발생기: ICC, SCNT 생성  
* 명령어 디코더: 명령어 구별 
* 상태 레지스터: 상태 플래그를 제어장치로 공급  

* * 상태 플래그* * 
조건 분기 구현  
* PC(Program Counter)에 목적지 주소를 적재할 때
* 무조건 적재하면, 무조건 분기
* 조건에 따라 적재 여부를 결정하면, 조건 분기

IPCH = ES∙RET∙SCNT2  
* 실행단계 RET 명령어 2번째 클럭 사이클
IPCL = ES∙RET∙SCNT5  
* 실행단계 RET 명령어 5번째 클럭 사이클
RdMem = FS∙(SCNT1 + SCNT4) + ES∙(LD∙SCNT2 + RET∙SCNT5)  
* 인출단계의 1번째와 4번째 클럭
* 실행단계 LD 명령어의 2번째 클럭
* 실행단계 RET 명령어의 5번째 클럭
WrMem = ES∙(ST∙SCNT2 + PUSH∙SCNT3 + CALL∙SCNT3 + CALL∙SCNT7) + IS∙(SCNT3 + SCNT7 + SCNT11)
* 실행단계 ST 명령어의 2번째 클럭
* 실행단계 PUSH 명령어의 3번째 클럭
* 실행단계 CALL 명령어의 3번째와 7번째 클럭
* 인터럽트단계의 3번째, 7번째, 11번째 클럭